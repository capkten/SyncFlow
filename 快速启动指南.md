# 快速启动指南

## ✅ 问题已解决

**问题**: 启动时报错 `sqlite3.OperationalError: unable to open database file`  
**原因**: `data` 目录不存在，SQLite 无法创建数据库文件  
**解决**: 已修复 `backend/models/database.py`，现在会自动创建目录

---

## 🚀 启动步骤

### 1. 确保在项目根目录
```powershell
cd d:\codes\tongbu
```

### 2. 启动服务
```powershell
python backend/app.py
```

### 3. 查看启动日志
启动成功后，您会看到类似以下日志：

```
2026-01-27 10:44:25 | INFO | 日志系统初始化完成，级别: INFO
2026-01-27 10:44:25 | INFO | ============================================================
2026-01-27 10:44:25 | INFO | 文件同步助手启动中...
2026-01-27 10:44:25 | INFO | ============================================================
2026-01-27 10:44:25 | INFO | 配置加载完成: ./data/sync.db
2026-01-27 10:44:25 | INFO | 初始化数据库: sqlite:///./data/sync.db
2026-01-27 10:44:25 | INFO | ✓ 数据库初始化完成
2026-01-27 10:44:25 | INFO | ✓ 文件同步助手启动完成
2026-01-27 10:44:25 | INFO | Web 界面: http://0.0.0.0:8888
2026-01-27 10:44:25 | INFO | ============================================================
INFO:     Uvicorn running on http://0.0.0.0:8888 (Press CTRL+C to quit)
```

### 4. 访问 Web 界面
打开浏览器，访问：
```
http://localhost:8888
```

---

## 📁 自动创建的目录和文件

启动后会自动创建：

```
d:\codes\tongbu\
├── data/                    # 数据目录（自动创建）
│   └── sync.db             # SQLite 数据库
└── logs/                    # 日志目录
    ├── file_sync_2026-01-27.log   # 应用日志
    └── errors_2026-01-27.log      # 错误日志
```

---

## ✅ 验证服务运行

### 方法1: 浏览器访问
打开浏览器访问 `http://localhost:8888`，应该看到文件同步助手的管理界面。

### 方法2: API 健康检查
```powershell
# 使用 PowerShell
Invoke-WebRequest -Uri http://localhost:8888/api/health -UseBasicParsing

# 或使用 curl（如果已安装）
curl http://localhost:8888/api/health
```

应该返回：
```json
{
  "status": "ok",
  "message": "文件同步助手运行正常",
  "running_tasks": 0
}
```

---

## 🛑 停止服务

在运行服务的终端窗口按 `Ctrl+C` 即可停止。

---

## 🐛 常见问题

### Q1: 端口 8888 被占用
**错误**: `Address already in use`

**解决**:
1. 修改 `config.yaml` 中的端口号
2. 或者杀掉占用 8888 端口的进程：
```powershell
# 查找占用端口的进程
netstat -ano | findstr :8888

# 杀掉进程（替换 <PID> 为实际进程ID）
taskkill /PID <PID> /F
```

### Q2: 模块导入错误
**错误**: `ModuleNotFoundError: No module named 'xxx'`

**解决**: 安装依赖
```powershell
pip install -r requirements.txt
```

### Q3: 数据库锁定
**错误**: `database is locked`

**解决**: 
1. 确保没有其他程序在访问数据库
2. 重启服务

---

## 📝 下一步

服务启动成功后，您可以：

1. **访问 Web 界面**: http://localhost:8888
2. **创建同步任务**: 点击"新建任务"按钮
3. **配置源目录和目标目录**
4. **启动同步**: 点击"启动"按钮

详细使用说明请参考 `使用指南.md`

---

## 🎉 恭喜！

您的文件同步助手已成功启动！

**当前状态**: ✅ 运行中  
**访问地址**: http://localhost:8888  
**日志位置**: `logs/file_sync_2026-01-27.log`

---

*最后更新: 2026-01-27*
